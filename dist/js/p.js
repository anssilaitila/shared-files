(()=>{"use strict";jQuery((function(e){!function(e){e(".shared-files-frontend-file-upload.shared-files-frontend-file-upload-ajax-active").submit((function(s){var i=e(this).closest(".shared-files-main-container").data("elem-class"),a=e(this)[0],l=a.elements._SF_GOTO.value;e("."+i+" .sf-public-file-upload-submit").hide(),e("."+i+" .shared-files-ajax-upload-progress-bar-container").show();var t=new FormData(a);if(void 0!==a.elements["_sf_files[]"])for(var f=a.elements["_sf_files[]"].files,n=0;n<f.length;n++)t.append("file",a.elements["_sf_files[]"].files[n]);else void 0!==a.elements._sf_file&&t.append("file",a.elements._sf_file.files);return e("."+i+" .shared-files-ajax-upload-phase-1").show(),e.ajax({xhr:function(){var s=new window.XMLHttpRequest;return s.upload.addEventListener("progress",(function(s){if(s.lengthComputable){var a=s.loaded/s.total;a=parseInt(100*a),e("."+i+" .shared-files-progress-bar").width(a+"%"),e("."+i+" .shared-files-progress-bar").html(a+"%"),100===a&&(e("."+i+" .shared-files-progress-bar").addClass("shared-files-progress-bar-green"),e("."+i+" .shared-files-ajax-upload-phase-2").show())}}),!1),s},url:l,type:"POST",data:t,contentType:!1,processData:!1,success:function(s){e("."+i+" .shared-files-ajax-upload-phase-2 img").hide(),e("."+i+" .shared-files-ajax-upload-phase-3").show()}}),!1})),e(".sf-public-file-upload-container input[type=checkbox]").prop("disabled",!1),e(".sf-termlist input[type=checkbox]").click((function(){this.checked?e(this).parents("li").children().children("input[type=checkbox]").prop("checked",!0):e(this).parents("li").children().children("input[type=checkbox]").prop("checked",!1)}))}(e),function(e){e(document).on("click",".shared-files-add-to-favorites",(function(s){s.preventDefault();var i={action:"sf_add_to_favorites",file_id:e(this).data("file-id")},a=e(this).parent();jQuery.post(ajaxurl,i,(function(e){var s=e.replace(/0$/,"");a.html(s)}))})),e(document).on("click",".shared-files-delete-from-favorites",(function(s){s.preventDefault();var i={action:"sf_delete_from_favorites",file_id:e(this).data("file-id")},a=e(this).parent();jQuery.post(ajaxurl,i,(function(e){var s=e.replace(/0$/,"");a.html(s)}))}))}(e),function(e){e(document).on("click",".shared-files-modal-container",(function(s){if(s.target===this){var i=e(this).data("file-id");i?e(".shared-files-modal-container-"+i).hide():e(".shared-files-modal-container").hide()}})),e(document).on("click",".shared-files-close-modal",(function(s){s.preventDefault();var i=e(this).data("file-id");i?e(".shared-files-modal-container-"+i).hide():e(".shared-files-modal-container").hide()})),e(document).on("click",".shared-files-edit-file",(function(s){s.preventDefault();var i=e(this).data("file-id"),a=".shared-files-modal-container-edit-file-"+i,l="shared-files-description-editor-file-"+i;tinyMCE.execCommand("mceRemoveEditor",!1,"shared-files-editor-"+i),tinyMCE.editors.length=0,tinyMCE.init({mode:"specific_textareas",elements:"pre-details",theme:"modern",skin:"lightgray",menubar:!1,statusbar:!1,toolbar:["bold italic underline | alignleft aligncenter alignright | bullist numlist outdent indent | undo redo | link"],plugins:"paste, lists, link",paste_auto_cleanup_on_paste:!0,paste_postprocess:function(e,s){s.node.innerHTML=s.node.innerHTML.replace(/&nbsp;+/gi," ")},editor_selector:l}),e(a).show()}))}(e),function(e){e(".shared-files-container .shared-files-category-select, .shared-files-container .shared-files-tag-select, .shared-files-container .shared-files-custom-field-select").change((function(){var s=e(this).closest("form").data("elem-class"),i=e(this).closest("form").data("restricted"),a="";(a=e(this).closest("form").find('select[name="sf_category"]').val())||(a=e(this).closest("form").find('input[name="sf_category"]').val());var l={action:"sf_get_files",sf_category:a,sf_tag:e(this).closest("form").find('select[name="sf_tag"]').val(),atts:e(this).closest("form").find('input[name="atts"]').val(),restricted:i,cf_1:e(this).closest("form").find('select[name="cf_1"]').val(),cf_2:e(this).closest("form").find('select[name="cf_2"]').val(),cf_3:e(this).closest("form").find('select[name="cf_3"]').val(),cf_4:e(this).closest("form").find('select[name="cf_4"]').val(),cf_5:e(this).closest("form").find('select[name="cf_5"]').val(),cf_6:e(this).closest("form").find('select[name="cf_6"]').val(),cf_7:e(this).closest("form").find('select[name="cf_7"]').val(),cf_8:e(this).closest("form").find('select[name="cf_8"]').val(),cf_9:e(this).closest("form").find('select[name="cf_9"]').val(),cf_10:e(this).closest("form").find('select[name="cf_10"]').val(),cf_11:e(this).closest("form").find('select[name="cf_11"]').val(),cf_12:e(this).closest("form").find('select[name="cf_12"]').val(),cf_13:e(this).closest("form").find('select[name="cf_13"]').val(),cf_14:e(this).closest("form").find('select[name="cf_14"]').val(),cf_15:e(this).closest("form").find('select[name="cf_15"]').val(),cf_16:e(this).closest("form").find('select[name="cf_16"]').val(),cf_17:e(this).closest("form").find('select[name="cf_17"]').val(),cf_18:e(this).closest("form").find('select[name="cf_18"]').val(),cf_19:e(this).closest("form").find('select[name="cf_19"]').val(),cf_20:e(this).closest("form").find('select[name="cf_20"]').val()};jQuery.post(ajaxurl,l,(function(i){var a=i.replace(/0$/,"");e("."+s+" .shared-files-search-files").val(""),e("."+s+" .shared-files-nothing-found").hide(),e("."+s+" .shared-files-files-found").hide(),e("."+s+" .shared-files-non-ajax").hide(),e("."+s+" .shared-files-pagination").hide(),e("."+s+" .shared-files-pagination-improved").hide(),e("."+s+" .shared-files-ajax-list").empty().append(a);var l="./?"+e("."+s+" .shared-files-ajax-form select").serialize();window.history.pushState({urlPath:l},"",l)}))})),e(".shared-files-search-files:not(.shared-files-search-files-active-only)").keyup((function(s){var i,a,l,t,f=e(this).data("elem-class");a=(i=e("."+f+" .shared-files-search-files")).val().toUpperCase(),e("."+f+" .shared-files-all-files"),l=e("."+f+" .shared-files-all-files li");for(var n=0,d=0,o=0;o<l.length;o++)(t=l[o].getElementsByClassName("shared-files-main-elements")[0])&&t.textContent.toUpperCase().indexOf(a)>-1?(l[o].style.display="",d++):(l[o].style.display="none",n++);""==i.val()?(e("."+f+" .shared-files-nothing-found").hide(),e("."+f+" .shared-files-files-found").hide(),e("."+f+" .shared-files-main-file-list").show(),e("."+f+" .shared-files-pagination").show(),e("."+f+" .shared-files-pagination-improved").show(),e("."+f+" .shared-files-all-files").hide()):l.length==n?(e("."+f+" .shared-files-nothing-found").show(),e("."+f+" .shared-files-files-found").hide(),e("."+f+" .shared-files-main-file-list").hide(),e("."+f+" .shared-files-pagination").hide(),e("."+f+" .shared-files-pagination-improved").hide(),e("."+f+" .shared-files-all-files").css("display","flex")):(e("."+f+" .shared-files-nothing-found").hide(),e("."+f+" .shared-files-files-found").html(d+" "+(d>1?e("."+f+" .shared-files-more-than-one-file-found").html():e("."+f+" .shared-files-one-file-found").html())),e("."+f+" .shared-files-files-found").show(),e("."+f+" .shared-files-main-file-list").hide(),e("."+f+" .shared-files-pagination").hide(),e("."+f+" .shared-files-pagination-improved").hide(),e("."+f+" .shared-files-all-files").css("display","flex"))})),e(".shared-files-search-files.shared-files-search-files-active-only").keyup((function(s){var i,a,l,t,f=e(this).data("elem-class");a=(i=e("."+f+" .shared-files-search-files")).val().toUpperCase(),e("."+f+" .shared-files-ajax-list"),l=e("."+f+" .shared-files-ajax-list li");for(var n=0,d=0,o=0;o<l.length;o++)(t=l[o].getElementsByClassName("shared-files-main-elements")[0])&&t.textContent.toUpperCase().indexOf(a)>-1?(l[o].style.display="",d++):(l[o].style.display="none",n++);""==i.val()?(e("."+f+" .shared-files-nothing-found").hide(),e("."+f+" .shared-files-files-found").hide(),e("."+f+" .shared-files-pagination").show(),e("."+f+" .shared-files-pagination-improved").show()):l.length==n?(e("."+f+" .shared-files-nothing-found").show(),e("."+f+" .shared-files-files-found").hide(),e("."+f+" .shared-files-pagination").hide(),e("."+f+" .shared-files-pagination-improved").hide()):(e("."+f+" .shared-files-nothing-found").hide(),e("."+f+" .shared-files-files-found").html(d+" "+(d>1?e("."+f+" .shared-files-more-than-one-file-found").html():e("."+f+" .shared-files-one-file-found").html())),e("."+f+" .shared-files-files-found").show(),e("."+f+" .shared-files-pagination").hide(),e("."+f+" .shared-files-pagination-improved").hide())}))}(e),function(e){e(".shared-files-simple-container .shared-files-category-select, .shared-files-simple-container .shared-files-tag-select, .shared-files-simple-container .shared-files-custom-field-select").change((function(){var s=e(this).closest("form").data("elem-class"),i="";(i=e(this).closest("form").find('select[name="sf_category"]').val())||(i=e(this).closest("form").find('input[name="sf_category"]').val());var a={action:"sf_get_files_simple",sf_category:i,sf_tag:e(this).closest("form").find('select[name="sf_tag"]').val(),atts:e(this).closest("form").find('input[name="atts"]').val(),cf_1:e(this).closest("form").find('select[name="cf_1"]').val(),cf_2:e(this).closest("form").find('select[name="cf_2"]').val(),cf_3:e(this).closest("form").find('select[name="cf_3"]').val(),cf_4:e(this).closest("form").find('select[name="cf_4"]').val(),cf_5:e(this).closest("form").find('select[name="cf_5"]').val(),cf_6:e(this).closest("form").find('select[name="cf_6"]').val(),cf_7:e(this).closest("form").find('select[name="cf_7"]').val(),cf_8:e(this).closest("form").find('select[name="cf_8"]').val(),cf_9:e(this).closest("form").find('select[name="cf_9"]').val(),cf_10:e(this).closest("form").find('select[name="cf_10"]').val(),cf_11:e(this).closest("form").find('select[name="cf_11"]').val(),cf_12:e(this).closest("form").find('select[name="cf_12"]').val(),cf_13:e(this).closest("form").find('select[name="cf_13"]').val(),cf_14:e(this).closest("form").find('select[name="cf_14"]').val(),cf_15:e(this).closest("form").find('select[name="cf_15"]').val(),cf_16:e(this).closest("form").find('select[name="cf_16"]').val(),cf_17:e(this).closest("form").find('select[name="cf_17"]').val(),cf_18:e(this).closest("form").find('select[name="cf_18"]').val(),cf_19:e(this).closest("form").find('select[name="cf_19"]').val(),cf_20:e(this).closest("form").find('select[name="cf_20"]').val()};jQuery.post(ajaxurl,a,(function(i){var a=i.replace(/0$/,"");e("."+s+" .shared-files-simple-search").val(""),e("."+s+" .shared-files-simple-nothing-found").hide(),e("."+s+" .shared-files-files-found").hide(),e("."+s+" .shared-files-non-ajax").hide(),e("."+s+" .shared-files-pagination").hide(),e("."+s+" .shared-files-pagination-improved").hide(),e("."+s+" .shared-files-simple-ajax-results").empty().append(a);var l="./?"+e("."+s+" .shared-files-ajax-form select").serialize();window.history.pushState({urlPath:l},"",l)}))})),e(".shared-files-simple-search:not(.shared-files-simple-search-active-only)").keyup((function(){var s,i,a,l,t=e(this).data("elem-class");i=(s=e("."+t+" .shared-files-simple-search")).val().toUpperCase(),e("."+t+" .shared-files-simple-search-all-files .shared-files-simple-list"),a=e("."+t+" .shared-files-simple-search-all-files .shared-files-simple-list .shared-files-simple-list-row:not(.shared-files-simple-list-title-row)");for(var f=0,n=0,d=0;d<a.length;d++)(l=a[d])&&l.textContent.toUpperCase().indexOf(i)>-1?(a[d].style.display="",n++):(a[d].style.display="none",f++);""==s.val()?(e("."+t+" .shared-files-simple-ajax-results").show(),e("."+t+" .shared-files-simple-search-all-files").hide(),e("."+t+" .shared-files-simple-nothing-found").hide(),e("."+t+" .shared-files-files-found").hide(),e("."+t+" .shared-files-pagination").show(),e("."+t+" .shared-files-pagination-improved").show()):a.length==f?(e("."+t+" .shared-files-simple-ajax-results").hide(),e("."+t+" .shared-files-simple-search-all-files").hide(),e("."+t+" .shared-files-simple-nothing-found").show(),e("."+t+" .shared-files-files-found").hide(),e("."+t+" .shared-files-pagination").hide(),e("."+t+" .shared-files-pagination-improved").hide()):(e("."+t+" .shared-files-simple-ajax-results").hide(),e("."+t+" .shared-files-simple-search-all-files").show(),e("."+t+" .shared-files-simple-nothing-found").hide(),e("."+t+" .shared-files-files-found").html(n+" "+(n>1?e("."+t+" .shared-files-more-than-one-file-found").html():e("."+t+" .shared-files-one-file-found").html())),e("."+t+" .shared-files-files-found").show(),e("."+t+" .shared-files-pagination").hide(),e("."+t+" .shared-files-pagination-improved").hide())})),e(".shared-files-simple-search.shared-files-simple-search-active-only").keyup((function(){var s,i,a,l,t=e(this).data("elem-class");i=(s=e("."+t+" .shared-files-simple-search")).val().toUpperCase(),e("."+t+" .shared-files-simple-ajax-results .shared-files-simple-list"),a=e("."+t+" .shared-files-simple-ajax-results .shared-files-simple-list .shared-files-simple-list-row:not(.shared-files-simple-list-title-row)");for(var f=0,n=0,d=0;d<a.length;d++)(l=a[d])&&l.textContent.toUpperCase().indexOf(i)>-1?(a[d].style.display="",n++):(a[d].style.display="none",f++);""==s.val()?(e("."+t+" .shared-files-simple-ajax-results").show(),e("."+t+" .shared-files-simple-nothing-found").hide(),e("."+t+" .shared-files-files-found").hide(),e("."+t+" .shared-files-pagination").show(),e("."+t+" .shared-files-pagination-improved").show()):a.length==f?(e("."+t+" .shared-files-simple-ajax-results").hide(),e("."+t+" .shared-files-simple-nothing-found").show(),e("."+t+" .shared-files-files-found").hide(),e("."+t+" .shared-files-pagination").hide(),e("."+t+" .shared-files-pagination-improved").hide()):(e("."+t+" .shared-files-simple-ajax-results").show(),e("."+t+" .shared-files-simple-nothing-found").hide(),e("."+t+" .shared-files-files-found").html(n+" "+(n>1?e("."+t+" .shared-files-more-than-one-file-found").html():e("."+t+" .shared-files-one-file-found").html())),e("."+t+" .shared-files-files-found").show(),e("."+t+" .shared-files-pagination").hide(),e("."+t+" .shared-files-pagination-improved").hide())}))}(e),function(e){e(document).on("click",".shared-files-accordion-category-title-container",(function(s){var i=e(this).data("elem-class"),a=e(this).data("category-id"),l="."+i+" .shared-files-accordion-category-"+a,t="."+i+" .shared-files-accordion-contents-"+a;e(t).is(":visible")?(e(l).removeClass("shared-files-accordion-category-open"),e(l).addClass("shared-files-accordion-category-closed"),e(t).hide()):(e(l).addClass("shared-files-accordion-category-open"),e(l).removeClass("shared-files-accordion-category-closed"),e(t).show())}))}(e),function(e){e(".shared-files-search-all-files").keyup((function(){var s,i,a,l,t=e(this).data("elem-class");i=(s=e("."+t+" .shared-files-search-all-files")).val().toUpperCase();for(var f=e("."+t+" .shared-files-in-category"),n=0,d=0;d<f.length;d++){a=f[d].getElementsByTagName("li");for(var o=0,r=0;r<a.length;r++)(l=a[r].getElementsByClassName("shared-files-main-elements")[0])&&l.textContent.toUpperCase().indexOf(i)>-1?(a[r].style.display="",n++,o++):a[r].style.display="none";f[d].parentElement.style.display=0==o?"none":""}""==s.val()?(e("."+t+" .shared-files-nothing-found").hide(),e("."+t+" .shared-files-files-found").hide(),e("."+t+" .shared-files-all-files-and-categories").hide()):0==n?(e("."+t+" .shared-files-nothing-found").show(),e("."+t+" .shared-files-files-found").hide(),e("."+t+" .shared-files-all-files-and-categories").show()):(e("."+t+" .shared-files-nothing-found").hide(),e("."+t+" .shared-files-files-found").html(n+" "+(n>1?e("."+t+" .shared-files-more-than-one-file-found").html():e("."+t+" .shared-files-one-file-found").html())),e("."+t+" .shared-files-files-found").show(),e("."+t+" .shared-files-all-files-and-categories").show())})),e(".shared-files-search-files-v2").keyup((function(){var s,i,a,l,t=e(this).data("elem-class");i=(s=e("."+t+" .shared-files-search-files-v2")).val().toUpperCase(),e("."+t+" .shared-files-all-files"),a=e("."+t+" .shared-files-all-files li");for(var f=0,n=0,d=0;d<a.length;d++)(l=a[d].getElementsByClassName("shared-files-main-elements")[0])&&l.textContent.toUpperCase().indexOf(i)>-1?(a[d].style.display="",n++):(a[d].style.display="none",f++);""==s.val()?(e("."+t+" .shared-files-nothing-found").hide(),e("."+t+" .shared-files-files-found").hide(),e("."+t+" .shared-files-main-file-list").show(),e("."+t+" .shared-files-pagination").show(),e("."+t+" .shared-files-pagination-improved").show(),e("."+t+" .shared-files-all-files").hide()):a.length==f?(e("."+t+" .shared-files-nothing-found").show(),e("."+t+" .shared-files-files-found").hide(),e("."+t+" .shared-files-main-file-list").hide(),e("."+t+" .shared-files-pagination").hide(),e("."+t+" .shared-files-pagination-improved").hide(),e("."+t+" .shared-files-all-files").css("display","flex")):(e("."+t+" .shared-files-nothing-found").hide(),e("."+t+" .shared-files-files-found").html(n+" "+(n>1?e("."+t+" .shared-files-more-than-one-file-found").html():e("."+t+" .shared-files-one-file-found").html())),e("."+t+" .shared-files-files-found").show(),e("."+t+" .shared-files-main-file-list").hide(),e("."+t+" .shared-files-pagination").hide(),e("."+t+" .shared-files-pagination-improved").hide(),e("."+t+" .shared-files-all-files").css("display","flex"))}))}(e),function(e){e(document).on("click","a.shared-files-file-title, a.shared-files-preview-image",(function(s){var i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=e(this).data("file-type"),l=e(this).data("file-url"),t=e(this).data("external-url"),f=e(this).attr("href");if(e(this).data("image-url")&&(f=e(this).data("image-url")),a.startsWith("video")&&!i){s.preventDefault();var n=l,d=e(this).data("video-url-redir");d&&(n=d);var o='<video preload controls autoplay><source src="'+n+'" /></video>',r=basicLightbox.create(o);jQuery.post(l,{only_meta:1},(function(e){})),r.show()}else if("youtube"==a&&t){s.preventDefault();var h=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/),c=h&&11===h[2].length?h[2]:null,m=basicLightbox.create('<iframe allow="autoplay" src="//www.youtube.com/embed/'+c+'?autoplay=1" width="560" height="315" frameborder="0" allowfullscreen style="width: 560px;"></iframe>');jQuery.post(l,{youtube:1},(function(e){})),m.show()}else"image"==a&&(s.preventDefault(),basicLightbox.create('<img src="'+f+'" />').show(),l&&jQuery.post(l,{only_meta:1},(function(e){})))}))}(e)}))})();